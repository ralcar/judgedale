<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel='import' href='../bower_components/paper-card/paper-card.html'>
<link rel='import' href='../bower_components/plastic-image/plastic-image.html'>
<link rel='import' href='../bower_components/google-youtube/google-youtube.html'>
<link rel="import" href="jd-card-admin.html">
<link rel="import" href="jd-question.html">
<link rel="import" href="jd-answer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">


<dom-module id="jd-card">
  <template>
    <style include="shared-styles">
       :host {
        display: block;
        width: 100%;
        height: auto;
      }

      .card {
         border-radius: 15px;
         padding: 0;
         margin: 0;
      }

      .emote-container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 50px;
        height: 50px;
      }

      .emote-container img {
        border-radius: 50%;
        max-width: 50px;
        max-height: 50px;
      }

      jd-answer {
        border-top: 1px solid #e8e8e8;
      }

      plastic-image {
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        filter: grayscale(100%); 
      }

      jd-card-admin {
        padding: 15px;
      }
</style>

    <!-- <paper-card> -->
    <div class="card">
      <plastic-image
        preload
        fade
        sizing="cover"
        lazy-load
        srcset="[[judgement.smallImageURL]] 500w, [[judgement.largeImageURL]]"
        placeholder="[[judgement.placeHolderImage]]"
        style="height:720px;width:960px">
      </plastic-image>
      
      <template is="dom-if" if="[[computeIfVideoVisible(judgement.videoId)]]">
        <google-youtube
          video-id="[[judgement.videoId]]"
          height="370px"
          width="100%"
          rel="0"
          start="5"
          autoplay="0">
        </google-youtube>
      </template>
      <jd-question question="[[judgement]]"></jd-question>

      <template is="dom-if" if="[[judgement.answer]]">
        <jd-answer answer="[[judgement]]"></jd-answer>
      </template>

      <template is="dom-if" if="[[admin]]">
        <div hidden$="[[previewMode]]">
          <jd-card-admin judgement="{{judgement}}"></jd-card-admin>
        </div>
      </template>
    </div>
    <!-- </paper-card> -->
  </template>

  <script>
    class JudgeDaleCard extends Polymer.Element {
      static get is() {
        return 'jd-card';
      }

      static get properties() {
        return {
          judgement: {
            type: Object,
            notify: true
          },
          previewMode: Boolean,
          admin: Boolean
        }
      }

      computeIfVideoVisible(videoId) {
        if(videoId && videoId.length > 10) return true;
      }

    }

    window.customElements.define(JudgeDaleCard.is, JudgeDaleCard);
  </script>
</dom-module>